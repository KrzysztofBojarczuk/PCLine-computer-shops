{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/shop.service\";\nimport * as i2 from \"src/app/services/product.service\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/input\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/select\";\nimport * as i10 from \"@angular/material/core\";\nimport * as i11 from \"../product-card/product-card.component\";\nfunction ProductByIdComponent_mat_option_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const shop_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", shop_r1.shopId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(shop_r1.shopId);\n  }\n}\nexport class ProductByIdComponent {\n  constructor(shopService, productService, dialog, fb) {\n    this.shopService = shopService;\n    this.productService = productService;\n    this.dialog = dialog;\n    this.fb = fb;\n    this.shops = [];\n    this.productsById = [];\n    this.shopForm = this.fb.group({\n      shopId: [''],\n      name: [{\n        value: '',\n        disabled: true\n      }]\n    });\n  }\n  ngOnInit() {\n    this.getShops();\n  }\n  clear() {\n    this.productService.getProductsByIdService(0, '').subscribe(result => {\n      this.productsById = result;\n    }, error => {\n      console.error('Error fetching products:', error);\n    });\n  }\n  getShops() {\n    this.shopService.getShopForProduct().subscribe(result => {\n      this.shops = result;\n    }, error => {\n      console.error('Błąd podczas pobierania produktów:', error);\n    });\n  }\n  getProductsForShopById() {\n    const shopId = this.shopForm.get('shopId')?.value;\n    if (shopId) {\n      this.productService.getProductsByIdService(shopId, '').subscribe(result => {\n        this.productsById = result;\n      }, error => {\n        console.error('Error fetching products:', error);\n      });\n    }\n  }\n  onShopIdChange(event) {\n    const selectedShopId = event.value;\n    const selectedShop = this.shops.find(shop => shop.shopId === selectedShopId);\n    if (selectedShop) {\n      this.shopForm.patchValue({\n        name: selectedShop.name\n      });\n    }\n  }\n}\n_class = ProductByIdComponent;\n_class.ɵfac = function ProductByIdComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.ShopService), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i3.MatDialog), i0.ɵɵdirectiveInject(i4.FormBuilder));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-product-by-id\"]],\n  decls: 19,\n  vars: 3,\n  consts: [[3, \"formGroup\"], [1, \"mb-3\"], [\"formControlName\", \"shopId\", 3, \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"matInput\", \"\", \"formControlName\", \"name\"], [\"mat-raised-button\", \"\", 2, \"margin-left\", \"10px\", 3, \"click\"], [3, \"products\"], [3, \"value\"]],\n  template: function ProductByIdComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0)(1, \"p\");\n      i0.ɵɵtext(2, \"Choose Shop\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 1)(4, \"mat-form-field\")(5, \"mat-label\");\n      i0.ɵɵtext(6, \"Select Shop\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"mat-select\", 2);\n      i0.ɵɵlistener(\"selectionChange\", function ProductByIdComponent_Template_mat_select_selectionChange_7_listener($event) {\n        return ctx.onShopIdChange($event);\n      });\n      i0.ɵɵtemplate(8, ProductByIdComponent_mat_option_8_Template, 2, 2, \"mat-option\", 3);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(9, \"div\", 1)(10, \"mat-form-field\")(11, \"mat-label\");\n      i0.ɵɵtext(12, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(13, \"input\", 4);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(14, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function ProductByIdComponent_Template_button_click_14_listener() {\n        return ctx.getProductsForShopById();\n      });\n      i0.ɵɵtext(15, \" Get Product\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function ProductByIdComponent_Template_button_click_16_listener() {\n        return ctx.clear();\n      });\n      i0.ɵɵtext(17, \" Clear\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"app-product-card\", 6);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"formGroup\", ctx.shopForm);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngForOf\", ctx.shops);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"products\", ctx.productsById);\n    }\n  },\n  dependencies: [i5.NgForOf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName, i6.MatInput, i7.MatFormField, i7.MatLabel, i8.MatButton, i9.MatSelect, i10.MatOption, i11.ProductCardComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ProductByIdComponent","constructor","shopService","productService","dialog","fb","shopForm","group","shopId","name","value","disabled","ngOnInit","getShops","clear","getProductsByIdService","subscribe","result","productsById","error","console","getShopForProduct","shops","getProductsForShopById","get","onShopIdChange","event","selectedShopId","selectedShop","find","shop","patchValue","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\Projects\\PC-Line-computer-shops-Angular\\src\\app\\products\\product-by-id\\product-by-id.component.html","D:\\Projects\\PC-Line-computer-shops-Angular\\src\\app\\products\\product-by-id\\product-by-id.component.ts"],"sourcesContent":["<form [formGroup]=\"shopForm\">\r\n  <p>Choose Shop</p>\r\n  <div class=\"mb-3\">\r\n    <mat-form-field>\r\n      <mat-label>Select Shop</mat-label>\r\n      <mat-select\r\n        formControlName=\"shopId\"\r\n        (selectionChange)=\"onShopIdChange($event)\"\r\n      >\r\n        <mat-option *ngFor=\"let shop of shops\" [value]=\"shop.shopId\">{{\r\n          shop.shopId\r\n        }}</mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n  </div>\r\n  <div class=\"mb-3\">\r\n    <mat-form-field>\r\n      <mat-label>Name</mat-label>\r\n      <input matInput formControlName=\"name\" />\r\n    </mat-form-field>\r\n  </div>\r\n</form>\r\n<button\r\n  style=\"margin-left: 10px\"\r\n  mat-raised-button\r\n  (click)=\"getProductsForShopById()\"\r\n>\r\n  Get Product\r\n</button>\r\n<button style=\"margin-left: 10px\" mat-raised-button (click)=\"clear()\">\r\n  Clear\r\n</button>\r\n\r\n<app-product-card [products]=\"productsById\"></app-product-card>\r\n","import { Component } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSelectChange } from '@angular/material/select';\r\nimport { Product } from 'src/app/models/product';\r\nimport { Shop } from 'src/app/models/shop';\r\nimport { ProductService } from 'src/app/services/product.service';\r\nimport { ShopService } from 'src/app/services/shop.service';\r\n\r\n@Component({\r\n  selector: 'app-product-by-id',\r\n  templateUrl: './product-by-id.component.html',\r\n  styleUrls: ['./product-by-id.component.scss'],\r\n})\r\nexport class ProductByIdComponent {\r\n  shopForm: FormGroup;\r\n  shops: Shop[] = [];\r\n  productsById: Product[] = [];\r\n\r\n  constructor(\r\n    private shopService: ShopService,\r\n    private productService: ProductService,\r\n    private dialog: MatDialog,\r\n    private fb: FormBuilder\r\n  ) {\r\n    this.shopForm = this.fb.group({\r\n      shopId: [''],\r\n      name: [{ value: '', disabled: true }],\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getShops();\r\n  }\r\n\r\n  clear() {\r\n    this.productService.getProductsByIdService(0, '').subscribe(\r\n      (result: Product[]) => {\r\n        this.productsById = result;\r\n      },\r\n      (error) => {\r\n        console.error('Error fetching products:', error);\r\n      }\r\n    );\r\n  }\r\n\r\n  getShops() {\r\n    this.shopService.getShopForProduct().subscribe(\r\n      (result: Shop[]) => {\r\n        this.shops = result;\r\n      },\r\n      (error) => {\r\n        console.error('Błąd podczas pobierania produktów:', error);\r\n      }\r\n    );\r\n  }\r\n\r\n  getProductsForShopById() {\r\n    const shopId = this.shopForm.get('shopId')?.value;\r\n\r\n    if (shopId) {\r\n      this.productService.getProductsByIdService(shopId, '').subscribe(\r\n        (result: Product[]) => {\r\n          this.productsById = result;\r\n        },\r\n        (error) => {\r\n          console.error('Error fetching products:', error);\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  onShopIdChange(event: MatSelectChange) {\r\n    const selectedShopId = event.value;\r\n    const selectedShop = this.shops.find(\r\n      (shop) => shop.shopId === selectedShopId\r\n    );\r\n\r\n    if (selectedShop) {\r\n      this.shopForm.patchValue({\r\n        name: selectedShop.name,\r\n      });\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}