{"ast":null,"code":"var _class;\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/shop.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"src/app/services/product.service\";\nimport * as i4 from \"@angular/material/dialog\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/input\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/select\";\nimport * as i10 from \"@angular/material/core\";\nfunction AddProductToShopComponent_mat_option_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const shop_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", shop_r1.shopId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(shop_r1.shopId);\n  }\n}\nexport class AddProductToShopComponent {\n  constructor(shopService, fb, productService, dialogRef) {\n    this.shopService = shopService;\n    this.fb = fb;\n    this.productService = productService;\n    this.dialogRef = dialogRef;\n    this.shops = [];\n    this.products = [];\n    this.shopForm = this.fb.group({\n      shopId: ['', Validators.required],\n      name: [{\n        value: '',\n        disabled: true\n      }, Validators.required],\n      startDate: [{\n        value: '',\n        disabled: true\n      }, Validators.required],\n      country: [{\n        value: '',\n        disabled: true\n      }, Validators.required]\n    });\n    this.productForm = this.fb.group({\n      name: ['', Validators.required],\n      price: [null, Validators.required],\n      amount: [null, Validators.required]\n    });\n  }\n  ngOnInit() {\n    this.getShops();\n  }\n  getShops() {\n    this.shopService.getShopForProduct().subscribe(result => {\n      this.shops = result;\n    }, error => {\n      console.error('Błąd podczas pobierania produktów:', error);\n    });\n  }\n  onShopIdChange(event) {\n    const selectedShopId = event.value;\n    const selectedShop = this.shops.find(shop => shop.shopId === selectedShopId);\n    if (selectedShop) {\n      this.shopForm.patchValue({\n        name: selectedShop.name,\n        startDate: selectedShop.startDate,\n        country: selectedShop.country\n      });\n    }\n  }\n  submit(shopId, product) {\n    this.productService.postProductForShopService(shopId, product).subscribe(res => {\n      this.dialogRef.close();\n    });\n  }\n}\n_class = AddProductToShopComponent;\n_class.ɵfac = function AddProductToShopComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.ShopService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.ProductService), i0.ɵɵdirectiveInject(i4.MatDialogRef));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-add-product-to-shop\"]],\n  decls: 54,\n  vars: 4,\n  consts: [[1, \"d-flex\", \"justify-content-between\", \"p-2\"], [\"mat-dialog-close\", \"\", 1, \"bi\", \"bi-x-circle\", 2, \"font-size\", \"1.5rem\"], [1, \"container\", \"mt-4\"], [1, \"row\"], [1, \"col-md-6\"], [3, \"formGroup\"], [1, \"mb-3\"], [\"formControlName\", \"shopId\", 3, \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"matInput\", \"\", \"formControlName\", \"name\"], [\"matInput\", \"\", \"formControlName\", \"startDate\"], [\"matInput\", \"\", \"formControlName\", \"country\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"p-3\", \"m-0\", \"border-0\", \"m-0\", \"border-0\"], [1, \"example-full-width\"], [\"matInput\", \"\", \"formControlName\", \"name\", \"required\", \"\"], [\"matInput\", \"\", \"formControlName\", \"price\", \"type\", \"number\", \"required\", \"\"], [\"matInput\", \"\", \"formControlName\", \"amount\", \"type\", \"number\", \"required\", \"\"], [1, \"d-flex\", \"justify-content-end\", \"p-2\"], [\"mat-raised-button\", \"\", \"mat-dialog-close\", \"\", 2, \"margin-right\", \"8px\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"type\", \"submit\", 3, \"disabled\"], [3, \"value\"]],\n  template: function AddProductToShopComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n      i0.ɵɵtext(2, \"Add Product To Shop\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(3, \"i\", 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 2)(5, \"div\", 3)(6, \"div\", 4)(7, \"form\", 5)(8, \"h1\");\n      i0.ɵɵtext(9, \"Choose Shop\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 6)(11, \"mat-form-field\")(12, \"mat-label\");\n      i0.ɵɵtext(13, \"Select Shop\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"mat-select\", 7);\n      i0.ɵɵlistener(\"selectionChange\", function AddProductToShopComponent_Template_mat_select_selectionChange_14_listener($event) {\n        return ctx.onShopIdChange($event);\n      });\n      i0.ɵɵtemplate(15, AddProductToShopComponent_mat_option_15_Template, 2, 2, \"mat-option\", 8);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(16, \"div\", 6)(17, \"mat-form-field\")(18, \"mat-label\");\n      i0.ɵɵtext(19, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(20, \"input\", 9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(21, \"div\", 6)(22, \"mat-form-field\")(23, \"mat-label\");\n      i0.ɵɵtext(24, \"Start Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(25, \"input\", 10);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(26, \"div\", 6)(27, \"mat-form-field\")(28, \"mat-label\");\n      i0.ɵɵtext(29, \"Country\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(30, \"input\", 11);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(31, \"div\", 4)(32, \"form\", 12);\n      i0.ɵɵlistener(\"ngSubmit\", function AddProductToShopComponent_Template_form_ngSubmit_32_listener() {\n        let tmp_b_0;\n        return ctx.submit((tmp_b_0 = ctx.shopForm.get(\"shopId\")) == null ? null : tmp_b_0.value, ctx.productForm.value);\n      });\n      i0.ɵɵelementStart(33, \"div\", 13)(34, \"div\", 6)(35, \"mat-form-field\", 14)(36, \"mat-label\");\n      i0.ɵɵtext(37, \"Name:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(38, \"input\", 15);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(39, \"div\", 6)(40, \"mat-form-field\", 14)(41, \"mat-label\");\n      i0.ɵɵtext(42, \"Price:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(43, \"input\", 16);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(44, \"div\", 6)(45, \"mat-form-field\", 14)(46, \"mat-label\");\n      i0.ɵɵtext(47, \"Amount:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(48, \"input\", 17);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(49, \"div\", 18)(50, \"button\", 19);\n      i0.ɵɵtext(51, \" Cancel \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(52, \"button\", 20);\n      i0.ɵɵtext(53, \" Submit \");\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      let tmp_3_0;\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"formGroup\", ctx.shopForm);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngForOf\", ctx.shops);\n      i0.ɵɵadvance(17);\n      i0.ɵɵproperty(\"formGroup\", ctx.productForm);\n      i0.ɵɵadvance(20);\n      i0.ɵɵproperty(\"disabled\", ctx.productForm.invalid || !((tmp_3_0 = ctx.shopForm.get(\"shopId\")) == null ? null : tmp_3_0.value));\n    }\n  },\n  dependencies: [i5.NgForOf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NumberValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.RequiredValidator, i2.FormGroupDirective, i2.FormControlName, i4.MatDialogClose, i6.MatInput, i7.MatFormField, i7.MatLabel, i8.MatButton, i9.MatSelect, i10.MatOption],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["Validators","i0","AddProductToShopComponent","constructor","shopService","fb","productService","dialogRef","shopForm","group","shopId","required","name","value","disabled","startDate","country","productForm","price","amount","ngOnInit","getShops","getShopForProduct","subscribe","result","shops","error","console","onShopIdChange","event","selectedShopId","selectedShop","find","shop","patchValue","submit","product","postProductForShopService","res","close","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\Projects\\PC-Line-computer-shops-Angular\\src\\app\\products\\add-product-to-shop\\add-product-to-shop.component.ts","D:\\Projects\\PC-Line-computer-shops-Angular\\src\\app\\products\\add-product-to-shop\\add-product-to-shop.component.html"],"sourcesContent":["import { Component, Inject } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { Product } from 'src/app/models/product';\r\nimport { Shop } from 'src/app/models/shop';\r\nimport { ProductService } from 'src/app/services/product.service';\r\nimport { ShopService } from 'src/app/services/shop.service';\r\nimport { ProductFormComponent } from '../product-form/product-form.component';\r\nimport { MatSelectChange } from '@angular/material/select';\r\nimport { ProductCreate } from 'src/app/models/product-create';\r\n\r\n@Component({\r\n  selector: 'app-add-product-to-shop',\r\n  templateUrl: './add-product-to-shop.component.html',\r\n  styleUrls: ['./add-product-to-shop.component.scss'],\r\n})\r\nexport class AddProductToShopComponent {\r\n  productForm: FormGroup;\r\n  shopForm: FormGroup;\r\n  shops: Shop[] = [];\r\n  products: Product[] = [];\r\n\r\n  constructor(\r\n    private shopService: ShopService,\r\n    private fb: FormBuilder,\r\n    private productService: ProductService,\r\n    private dialogRef: MatDialogRef<void>\r\n  ) {\r\n    this.shopForm = this.fb.group({\r\n      shopId: ['', Validators.required],\r\n      name: [{ value: '', disabled: true }, Validators.required],\r\n      startDate: [{ value: '', disabled: true }, Validators.required],\r\n      country: [{ value: '', disabled: true }, Validators.required],\r\n    });\r\n\r\n    this.productForm = this.fb.group({\r\n      name: ['', Validators.required],\r\n      price: [null, Validators.required],\r\n      amount: [null, Validators.required],\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getShops();\r\n  }\r\n\r\n  getShops() {\r\n    this.shopService.getShopForProduct().subscribe(\r\n      (result: Shop[]) => {\r\n        this.shops = result;\r\n      },\r\n      (error) => {\r\n        console.error('Błąd podczas pobierania produktów:', error);\r\n      }\r\n    );\r\n  }\r\n\r\n  onShopIdChange(event: MatSelectChange) {\r\n    const selectedShopId = event.value;\r\n    const selectedShop = this.shops.find(\r\n      (shop) => shop.shopId === selectedShopId\r\n    );\r\n\r\n    if (selectedShop) {\r\n      this.shopForm.patchValue({\r\n        name: selectedShop.name,\r\n        startDate: selectedShop.startDate,\r\n        country: selectedShop.country,\r\n      });\r\n    }\r\n  }\r\n\r\n  submit(shopId: number, product: ProductCreate) {\r\n    this.productService\r\n      .postProductForShopService(shopId, product)\r\n      .subscribe((res) => {\r\n        this.dialogRef.close();\r\n      });\r\n  }\r\n}\r\n","<div class=\"d-flex justify-content-between p-2\">\r\n  <h2>Add Product To Shop</h2>\r\n  <i class=\"bi bi-x-circle\" style=\"font-size: 1.5rem\" mat-dialog-close></i>\r\n</div>\r\n<div class=\"container mt-4\">\r\n  <div class=\"row\">\r\n    <div class=\"col-md-6\">\r\n      <form [formGroup]=\"shopForm\">\r\n        <h1>Choose Shop</h1>\r\n        <div class=\"mb-3\">\r\n          <mat-form-field>\r\n            <mat-label>Select Shop</mat-label>\r\n            <mat-select\r\n              formControlName=\"shopId\"\r\n              (selectionChange)=\"onShopIdChange($event)\"\r\n            >\r\n              <mat-option *ngFor=\"let shop of shops\" [value]=\"shop.shopId\">{{\r\n                shop.shopId\r\n              }}</mat-option>\r\n            </mat-select>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"mb-3\">\r\n          <mat-form-field>\r\n            <mat-label>Name</mat-label>\r\n            <input matInput formControlName=\"name\" />\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"mb-3\">\r\n          <mat-form-field>\r\n            <mat-label>Start Date</mat-label>\r\n            <input matInput formControlName=\"startDate\" />\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"mb-3\">\r\n          <mat-form-field>\r\n            <mat-label>Country</mat-label>\r\n            <input matInput formControlName=\"country\" />\r\n          </mat-form-field>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n    <div class=\"col-md-6\">\r\n      <form\r\n        [formGroup]=\"productForm\"\r\n        (ngSubmit)=\"submit(shopForm.get('shopId')?.value, productForm.value)\"\r\n      >\r\n        <div class=\"p-3 m-0 border-0 m-0 border-0\">\r\n          <div class=\"mb-3\">\r\n            <mat-form-field class=\"example-full-width\">\r\n              <mat-label>Name:</mat-label>\r\n              <input matInput formControlName=\"name\" required />\r\n            </mat-form-field>\r\n          </div>\r\n\r\n          <div class=\"mb-3\">\r\n            <mat-form-field class=\"example-full-width\">\r\n              <mat-label>Price:</mat-label>\r\n              <input matInput formControlName=\"price\" type=\"number\" required />\r\n            </mat-form-field>\r\n          </div>\r\n\r\n          <div class=\"mb-3\">\r\n            <mat-form-field class=\"example-full-width\">\r\n              <mat-label>Amount:</mat-label>\r\n              <input matInput formControlName=\"amount\" type=\"number\" required />\r\n            </mat-form-field>\r\n          </div>\r\n        </div>\r\n        <div class=\"d-flex justify-content-end p-2\">\r\n          <button style=\"margin-right: 8px\" mat-raised-button mat-dialog-close>\r\n            Cancel\r\n          </button>\r\n          <button\r\n            mat-raised-button\r\n            color=\"primary\"\r\n            type=\"submit\"\r\n            [disabled]=\"productForm.invalid || !shopForm.get('shopId')?.value\"\r\n          >\r\n            Submit\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}