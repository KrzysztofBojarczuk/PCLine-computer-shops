{"ast":null,"code":"var _class;\nimport { ProductFormComponent } from '../product-form/product-form.component';\nimport { ProductUpdateComponent } from '../product-update/product-update.component';\nimport { ConfirmationModalComponent } from 'src/app/shared/confirmation-modal/confirmation-modal.component';\nimport { AddProductToShopComponent } from '../add-product-to-shop/add-product-to-shop.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/shop.service\";\nimport * as i2 from \"src/app/services/product.service\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/material/snack-bar\";\nimport * as i5 from \"@angular/material/tooltip\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/expansion\";\nimport * as i8 from \"@angular/material/card\";\nimport * as i9 from \"@angular/forms\";\nimport * as i10 from \"@angular/material/input\";\nimport * as i11 from \"@angular/material/form-field\";\nimport * as i12 from \"@angular/material/button\";\nimport * as i13 from \"../product-by-id/product-by-id.component\";\nfunction ProductTableComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"h1\");\n    i0.ɵɵtext(2, \" Nomuber of products: \");\n    i0.ɵɵelementStart(3, \"b\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"h1\");\n    i0.ɵɵtext(6, \" Value of all products: \");\n    i0.ɵɵelementStart(7, \"b\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.getTotaNomuberOfPrducts(), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.getTotalValue(), \" USD \");\n  }\n}\nfunction ProductTableComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"mat-card\")(2, \"mat-card-header\")(3, \"mat-card-title\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"mat-card-subtitle\")(6, \"b\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"mat-card-content\")(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"mat-card-actions\")(12, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function ProductTableComponent_div_29_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const product_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.updateProduct(product_r2));\n    });\n    i0.ɵɵtext(13, \" Update \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function ProductTableComponent_div_29_Template_button_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const product_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.deleteProduct(product_r2));\n    });\n    i0.ɵɵtext(15, \" Delete \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const product_r2 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(product_r2.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" Price: \", product_r2.price, \" USD \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Available amount: \", product_r2.amount, \"\");\n  }\n}\nexport class ProductTableComponent {\n  constructor(shopService, productService, dialog, snackBar) {\n    this.shopService = shopService;\n    this.productService = productService;\n    this.dialog = dialog;\n    this.snackBar = snackBar;\n    this.shops = [];\n    this.products = [];\n    this.productVat = 0;\n    this.value = '';\n    this.step = 0;\n  }\n  ngOnInit() {\n    this.getAllProducts('');\n  }\n  setStep(index) {\n    this.step = index;\n  }\n  nextStep() {\n    this.step++;\n  }\n  prevStep() {\n    this.step--;\n  }\n  addProductToShop() {\n    const dialogRef = this.dialog.open(AddProductToShopComponent, {\n      width: '900px',\n      height: '520px'\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      this.getAllProducts('');\n    });\n  }\n  calculateProductVat(productWithVat) {\n    const vatRate = 0.23;\n    const productWithoutVat = productWithVat / (1 + vatRate);\n    return parseFloat(productWithoutVat.toFixed(2));\n  }\n  getTotaNomuberOfPrducts() {\n    return this.products.reduce((total, product) => total + product.amount, 0);\n  }\n  getTotalValue() {\n    return this.products.reduce((total, product) => total + product.price * product.amount, 0);\n  }\n  getAllProducts(searchTerm) {\n    this.productService.getProductsService(searchTerm).subscribe(result => {\n      this.products = result;\n    }, error => {\n      console.error('Error fetching products:', error);\n    });\n  }\n  clearSearch() {\n    this.value = '';\n    this.getAllProducts('');\n  }\n  createProduct() {\n    const dialogRef = this.dialog.open(ProductFormComponent, {\n      width: '400px',\n      height: '550px'\n    });\n    dialogRef.afterClosed();\n  }\n  updateProduct(product) {\n    const dialogRef = this.dialog.open(ProductUpdateComponent, {\n      width: '400px',\n      height: '450px',\n      data: product\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      this.getAllProducts('');\n    });\n  }\n  deleteProduct(product) {\n    const dialogRef = this.dialog.open(ConfirmationModalComponent, {\n      width: '400px',\n      height: '200px',\n      data: {\n        titleText: 'Delete Product',\n        confirmationText: 'Do you really want delete Product?'\n      }\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        this.productService.deleteProductService(product.shopId, product.productId).subscribe(result => {\n          this.getAllProducts('');\n          this.snackBar.open('Product deleted successfully', 'Close', {\n            duration: 3000\n          });\n        }, error => {\n          this.snackBar.open('Error deleting product', 'Close', {\n            duration: 3000\n          });\n        });\n      }\n    });\n  }\n}\n_class = ProductTableComponent;\n_class.ɵfac = function ProductTableComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.ShopService), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i3.MatDialog), i0.ɵɵdirectiveInject(i4.MatSnackBar));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-product-table\"]],\n  decls: 35,\n  vars: 7,\n  consts: [[1, \"scrollable-content\"], [1, \"example-headers-align\"], [\"hideToggle\", \"\", 3, \"expanded\", \"opened\"], [1, \"container\", \"px-4\", 2, \"margin-left\", \"10px\"], [1, \"row\", \"gx-5\"], [1, \"col\"], [\"class\", \"m-5\", 4, \"ngIf\"], [\"matInput\", \"\", \"type\", \"number\", 1, \"mb-1\", 2, \"margin-right\", \"10px\", 3, \"ngModel\", \"ngModelChange\"], [\"matInput\", \"\", \"type\", \"number\", \"disabled\", \"true\", 3, \"value\"], [1, \"row\", \"mt-5\"], [1, \"col-md-6\"], [1, \"example-form-field\"], [\"matInput\", \"\", \"type\", \"text\", \"placeholder\", \"Search\", 3, \"ngModel\", \"ngModelChange\"], [\"mat-raised-button\", \"\", 2, \"margin-left\", \"10px\", 3, \"click\"], [1, \"row\", \"mt-5\", \"mb-3\"], [\"class\", \"col-lg-4 col-md-6 col-sm-12 mb-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"m-5\"], [1, \"col-lg-4\", \"col-md-6\", \"col-sm-12\", \"mb-3\"], [\"mat-button\", \"\", \"matTooltip\", \"Update Product\", 3, \"click\"], [\"mat-button\", \"\", \"matTooltip\", \"Delete Product\", 3, \"click\"]],\n  template: function ProductTableComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"mat-accordion\", 1)(2, \"mat-expansion-panel\", 2);\n      i0.ɵɵlistener(\"opened\", function ProductTableComponent_Template_mat_expansion_panel_opened_2_listener() {\n        return ctx.setStep(0);\n      });\n      i0.ɵɵelementStart(3, \"mat-expansion-panel-header\")(4, \"mat-panel-title\");\n      i0.ɵɵtext(5, \" All Products \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"div\", 3)(7, \"div\", 4)(8, \"div\", 5);\n      i0.ɵɵtemplate(9, ProductTableComponent_div_9_Template, 9, 2, \"div\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 5)(11, \"p\");\n      i0.ɵɵtext(12, \"Product with VAT:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function ProductTableComponent_Template_input_ngModelChange_13_listener($event) {\n        return ctx.productVat = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"p\");\n      i0.ɵɵtext(15, \"Product without VAT\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(16, \"input\", 8);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(17, \"hr\");\n      i0.ɵɵelementStart(18, \"div\", 9)(19, \"div\", 10)(20, \"mat-form-field\", 11)(21, \"input\", 12);\n      i0.ɵɵlistener(\"ngModelChange\", function ProductTableComponent_Template_input_ngModelChange_21_listener($event) {\n        return ctx.value = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(22, \"button\", 13);\n      i0.ɵɵlistener(\"click\", function ProductTableComponent_Template_button_click_22_listener() {\n        return ctx.getAllProducts(ctx.value);\n      });\n      i0.ɵɵtext(23, \" Search \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(24, \"button\", 13);\n      i0.ɵɵlistener(\"click\", function ProductTableComponent_Template_button_click_24_listener() {\n        return ctx.clearSearch();\n      });\n      i0.ɵɵtext(25, \" Clear \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"button\", 13);\n      i0.ɵɵlistener(\"click\", function ProductTableComponent_Template_button_click_26_listener() {\n        return ctx.addProductToShop();\n      });\n      i0.ɵɵtext(27, \" Add Product To Shop \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(28, \"div\", 14);\n      i0.ɵɵtemplate(29, ProductTableComponent_div_29_Template, 16, 3, \"div\", 15);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(30, \"mat-expansion-panel\", 2);\n      i0.ɵɵlistener(\"opened\", function ProductTableComponent_Template_mat_expansion_panel_opened_30_listener() {\n        return ctx.setStep(2);\n      });\n      i0.ɵɵelementStart(31, \"mat-expansion-panel-header\")(32, \"mat-panel-title\");\n      i0.ɵɵtext(33, \" Products By Id \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(34, \"app-product-by-id\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"expanded\", ctx.step === 0);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.products.length !== 0);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.productVat);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"value\", ctx.calculateProductVat(ctx.productVat));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.value);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngForOf\", ctx.products);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"expanded\", ctx.step === 2);\n    }\n  },\n  dependencies: [i5.MatTooltip, i6.NgIf, i7.MatAccordion, i7.MatExpansionPanel, i7.MatExpansionPanelHeader, i7.MatExpansionPanelTitle, i8.MatCard, i8.MatCardActions, i8.MatCardContent, i8.MatCardHeader, i8.MatCardSubtitle, i8.MatCardTitle, i6.NgForOf, i9.DefaultValueAccessor, i9.NumberValueAccessor, i9.NgControlStatus, i10.MatInput, i11.MatFormField, i9.NgModel, i12.MatButton, i13.ProductByIdComponent],\n  styles: [\".scrollable-content[_ngcontent-%COMP%] {\\n  max-height: 1500px;\\n  overflow-y: auto;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcHJvZHVjdHMvcHJvZHVjdC10YWJsZS9wcm9kdWN0LXRhYmxlLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usa0JBQUE7RUFDQSxnQkFBQTtBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLnNjcm9sbGFibGUtY29udGVudCB7XHJcbiAgbWF4LWhlaWdodDogMTUwMHB4O1xyXG4gIG92ZXJmbG93LXk6IGF1dG87XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["ProductFormComponent","ProductUpdateComponent","ConfirmationModalComponent","AddProductToShopComponent","i0","ProductTableComponent","constructor","shopService","productService","dialog","snackBar","ngOnInit","getAllProducts","setStep","index","step","nextStep","prevStep","addProductToShop","dialogRef","open","width","height","afterClosed","subscribe","result","calculateProductVat","productWithVat","vatRate","productWithoutVat","parseFloat","toFixed","getTotaNomuberOfPrducts","products","reduce","total","product","amount","getTotalValue","price","searchTerm","getProductsService","error","console","clearSearch","value","createProduct","updateProduct","data","deleteProduct","titleText","confirmationText","deleteProductService","shopId","productId","duration","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\Projects\\PC-Line-computer-shops-Angular\\src\\app\\products\\product-table\\product-table.component.ts","D:\\Projects\\PC-Line-computer-shops-Angular\\src\\app\\products\\product-table\\product-table.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { Observable } from 'rxjs';\r\nimport { Shop } from 'src/app/models/shop';\r\nimport { ShopService } from 'src/app/services/shop.service';\r\nimport { ProductFormComponent } from '../product-form/product-form.component';\r\nimport { ProductService } from 'src/app/services/product.service';\r\nimport { Product } from 'src/app/models/product';\r\nimport { ProductUpdateComponent } from '../product-update/product-update.component';\r\nimport { ConfirmationModalComponent } from 'src/app/shared/confirmation-modal/confirmation-modal.component';\r\nimport { AddProductToShopComponent } from '../add-product-to-shop/add-product-to-shop.component';\r\n\r\n@Component({\r\n  selector: 'app-product-table',\r\n  templateUrl: './product-table.component.html',\r\n  styleUrls: ['./product-table.component.scss'],\r\n})\r\nexport class ProductTableComponent {\r\n  shops: Shop[] = [];\r\n  products: Product[] = [];\r\n  productVat: number = 0;\r\n  value: string = '';\r\n  step = 0;\r\n\r\n  constructor(\r\n    private shopService: ShopService,\r\n    private productService: ProductService,\r\n    private dialog: MatDialog,\r\n    private snackBar: MatSnackBar\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.getAllProducts('');\r\n  }\r\n\r\n  setStep(index: number) {\r\n    this.step = index;\r\n  }\r\n\r\n  nextStep() {\r\n    this.step++;\r\n  }\r\n\r\n  prevStep() {\r\n    this.step--;\r\n  }\r\n\r\n  addProductToShop() {\r\n    const dialogRef = this.dialog.open(AddProductToShopComponent, {\r\n      width: '900px',\r\n      height: '520px',\r\n    });\r\n    dialogRef.afterClosed().subscribe((result) => {\r\n      this.getAllProducts('');\r\n    });\r\n  }\r\n\r\n  calculateProductVat(productWithVat: number): number {\r\n    const vatRate = 0.23;\r\n    const productWithoutVat = productWithVat / (1 + vatRate);\r\n    return parseFloat(productWithoutVat.toFixed(2));\r\n  }\r\n\r\n  getTotaNomuberOfPrducts(): number {\r\n    return this.products.reduce((total, product) => total + product.amount, 0);\r\n  }\r\n\r\n  getTotalValue(): number {\r\n    return this.products.reduce(\r\n      (total, product) => total + product.price * product.amount,\r\n      0\r\n    );\r\n  }\r\n\r\n  getAllProducts(searchTerm?: string) {\r\n    this.productService.getProductsService(searchTerm).subscribe(\r\n      (result: Product[]) => {\r\n        this.products = result;\r\n      },\r\n      (error) => {\r\n        console.error('Error fetching products:', error);\r\n      }\r\n    );\r\n  }\r\n\r\n  clearSearch() {\r\n    this.value = '';\r\n    this.getAllProducts('');\r\n  }\r\n\r\n  createProduct() {\r\n    const dialogRef = this.dialog.open(ProductFormComponent, {\r\n      width: '400px',\r\n      height: '550px',\r\n    });\r\n    dialogRef.afterClosed();\r\n  }\r\n\r\n  updateProduct(product: Product) {\r\n    const dialogRef = this.dialog.open(ProductUpdateComponent, {\r\n      width: '400px',\r\n      height: '450px',\r\n      data: product,\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe((result) => {\r\n      this.getAllProducts('');\r\n    });\r\n  }\r\n\r\n  deleteProduct(product: Product) {\r\n    const dialogRef = this.dialog.open(ConfirmationModalComponent, {\r\n      width: '400px',\r\n      height: '200px',\r\n      data: {\r\n        titleText: 'Delete Product',\r\n        confirmationText: 'Do you really want delete Product?',\r\n      },\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe((result) => {\r\n      if (result) {\r\n        this.productService\r\n          .deleteProductService(product.shopId, product.productId)\r\n          .subscribe(\r\n            (result) => {\r\n              this.getAllProducts('');\r\n              this.snackBar.open('Product deleted successfully', 'Close', {\r\n                duration: 3000,\r\n              });\r\n            },\r\n            (error) => {\r\n              this.snackBar.open('Error deleting product', 'Close', {\r\n                duration: 3000,\r\n              });\r\n            }\r\n          );\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"scrollable-content\">\r\n  <mat-accordion class=\"example-headers-align\">\r\n    <mat-expansion-panel\r\n      [expanded]=\"step === 0\"\r\n      (opened)=\"setStep(0)\"\r\n      hideToggle\r\n    >\r\n      <mat-expansion-panel-header>\r\n        <mat-panel-title> All Products </mat-panel-title>\r\n      </mat-expansion-panel-header>\r\n      <div style=\"margin-left: 10px\" class=\"container px-4\">\r\n        <div class=\"row gx-5\">\r\n          <div class=\"col\">\r\n            <div class=\"m-5\" *ngIf=\"products.length !== 0\">\r\n              <h1>\r\n                Nomuber of products: <b> {{ getTotaNomuberOfPrducts() }} </b>\r\n              </h1>\r\n              <h1>\r\n                Value of all products: <b> {{ getTotalValue() }} USD </b>\r\n              </h1>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col\">\r\n            <p>Product with VAT:</p>\r\n            <input\r\n              class=\"mb-1\"\r\n              matInput\r\n              type=\"number\"\r\n              style=\"margin-right: 10px\"\r\n              [(ngModel)]=\"productVat\"\r\n            />\r\n\r\n            <p>Product without VAT</p>\r\n            <input\r\n              matInput\r\n              type=\"number\"\r\n              disabled=\"true\"\r\n              [value]=\"calculateProductVat(productVat)\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <hr />\r\n\r\n      <div class=\"row mt-5\">\r\n        <div class=\"col-md-6\">\r\n          <mat-form-field class=\"example-form-field\">\r\n            <input\r\n              matInput\r\n              type=\"text\"\r\n              placeholder=\"Search\"\r\n              [(ngModel)]=\"value\"\r\n            />\r\n          </mat-form-field>\r\n\r\n          <button\r\n            style=\"margin-left: 10px\"\r\n            mat-raised-button\r\n            (click)=\"getAllProducts(value)\"\r\n          >\r\n            Search\r\n          </button>\r\n          <button\r\n            style=\"margin-left: 10px\"\r\n            mat-raised-button\r\n            (click)=\"clearSearch()\"\r\n          >\r\n            Clear\r\n          </button>\r\n\r\n          <button\r\n            style=\"margin-left: 10px\"\r\n            mat-raised-button\r\n            (click)=\"addProductToShop()\"\r\n          >\r\n            Add Product To Shop\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class=\"row mt-5 mb-3\">\r\n        <div\r\n          *ngFor=\"let product of products\"\r\n          class=\"col-lg-4 col-md-6 col-sm-12 mb-3\"\r\n        >\r\n          <mat-card>\r\n            <mat-card-header>\r\n              <mat-card-title>{{ product.name }}</mat-card-title>\r\n              <mat-card-subtitle\r\n                ><b> Price: {{ product.price }} USD </b>\r\n              </mat-card-subtitle>\r\n            </mat-card-header>\r\n            <mat-card-content>\r\n              <p>Available amount: {{ product.amount }}</p>\r\n            </mat-card-content>\r\n            <mat-card-actions>\r\n              <button\r\n                mat-button\r\n                (click)=\"updateProduct(product)\"\r\n                matTooltip=\"Update Product\"\r\n              >\r\n                Update\r\n              </button>\r\n              <button\r\n                mat-button\r\n                (click)=\"deleteProduct(product)\"\r\n                matTooltip=\"Delete Product\"\r\n              >\r\n                Delete\r\n              </button>\r\n            </mat-card-actions>\r\n          </mat-card>\r\n        </div>\r\n      </div>\r\n    </mat-expansion-panel>\r\n    <mat-expansion-panel\r\n      [expanded]=\"step === 2\"\r\n      (opened)=\"setStep(2)\"\r\n      hideToggle\r\n    >\r\n      <mat-expansion-panel-header>\r\n        <mat-panel-title> Products By Id </mat-panel-title>\r\n      </mat-expansion-panel-header>\r\n\r\n      <app-product-by-id></app-product-by-id>\r\n    </mat-expansion-panel>\r\n  </mat-accordion>\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}